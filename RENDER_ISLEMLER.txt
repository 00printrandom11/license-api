ğŸš¨ RENDER.COM - ACÄ°L Ä°ÅLEMLER
==========================================

SORUN 1: IP KÄ±sÄ±tlamasÄ± YOK âŒ
SORUN 2: Database KolonlarÄ± EKSÄ°K âŒ

==========================================
ADIM 1: Environment Variables Ekle
==========================================

Render.com Dashboard:
1. Services â†’ license-api
2. Environment â†’ Environment Variables
3. Åunu ekle:

   Key: ALLOWED_PANEL_IPS
   Value: 95.70.194.254

4. "Save Changes"

Bu IP dÄ±ÅŸÄ±nda kimse panele giremeyecek! ğŸ”’

==========================================
ADIM 2: Database Migration (Shell)
==========================================

Render.com Dashboard:
1. Services â†’ license-api
2. Shell (Ã¼st menÃ¼)
3. Åunu yapÄ±ÅŸtÄ±r ve ENTER:

python migrate_db.py

4. Ã‡Ä±ktÄ±yÄ± kontrol et:
   âœ… "Migration TamamlandÄ±!" gÃ¶rmeli

==========================================
ADIM 3: Servisi Restart Et
==========================================

Render.com Dashboard:
1. Manual Deploy â†’ "Deploy latest commit"
   VEYA
2. Settings â†’ "Restart Service"

==========================================
ADIM 4: Test Et
==========================================

1. Panel URL'nizi aÃ§Ä±n
2. IP'niz: 95.70.194.254 âœ… â†’ GiriÅŸ yapabilir
3. BaÅŸka IP â†’ 403 Forbidden ğŸš«

==========================================
SORUN YAÅARSAN
==========================================

SeÃ§enek A: GitHub'a Push ve Tekrar Deploy
-----------------------------------------
cd C:\Users\aLmiLa\Desktop\license-api
git add migrate_db.py main.py
git commit -m "Add IP whitelist and migration script"
git push

Render otomatik deploy eder.

SeÃ§enek B: Manuel Database DÃ¼zeltme
-----------------------------------------
Render.com Shell:

python

from database import engine
from sqlalchemy import text

with engine.connect() as conn:
    conn.execute(text("ALTER TABLE licenses ADD COLUMN hwid_change_count INTEGER DEFAULT 0"))
    conn.execute(text("ALTER TABLE licenses ADD COLUMN ip_change_count INTEGER DEFAULT 0"))
    conn.execute(text("ALTER TABLE licenses ADD COLUMN check_count INTEGER DEFAULT 0"))
    conn.execute(text("ALTER TABLE licenses ADD COLUMN abuse_score INTEGER DEFAULT 0"))
    conn.execute(text("ALTER TABLE licenses ADD COLUMN is_banned BOOLEAN DEFAULT 0"))
    conn.commit()

exit()

==========================================
GÃœVENLÄ°K KONTROL
==========================================

âœ… ALLOWED_PANEL_IPS = 95.70.194.254
âœ… ensure_panel_ip() fonksiyonu aktif
âœ… BaÅŸka IP'ler 403 alacak

Test:
- Kendi IP'nden aÃ§ â†’ GiriÅŸ yapabilir âœ…
- VPN ile aÃ§ â†’ 403 Forbidden ğŸš«
- Telefon hotspot ile aÃ§ â†’ 403 Forbidden ğŸš«

==========================================

Ã–ZET:
1. Environment Variables â†’ ALLOWED_PANEL_IPS ekle
2. Shell â†’ python migrate_db.py
3. Restart service
4. Test et!

==========================================

